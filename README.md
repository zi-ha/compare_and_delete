# 文件夹重复文件清理工具

这个工具可以比较两个文件夹中文件的哈希值，并删除第二个文件夹中与第一个文件夹重复的文件，从而节省磁盘空间。

## 🎯 版本说明

本工具提供两个版本：
- **GUI版本** (推荐): 图形界面，可视化操作，支持选择性删除
- **命令行版本**: 适合批处理和自动化脚本

## 功能特点

### GUI版本特色功能

#### 完整版功能
- 🖥️ **直观界面**: 现代化图形界面，操作简单直观
- ✅ **选择性删除**: 可以查看重复文件列表，自由选择要删除的文件
- 📋 **详细信息**: 显示文件名、路径、大小、哈希值、修改时间
- 🔄 **批量操作**: 支持全选、全不选、反选等批量操作
- 📤 **导出功能**: 可将重复文件列表导出为JSON或文本格式
- 🖱️ **右键菜单**: 支持打开文件、打开文件夹、复制路径等操作
- 📊 **实时统计**: 显示选中文件数量和将释放的空间大小
- 🎯 **拖放支持**: 可直接拖拽文件夹到输入框

#### 简化版功能
- 🖥️ **直观界面**: 现代化图形界面，操作简单直观
- ✅ **选择性删除**: 可以查看重复文件列表，自由选择要删除的文件
- 📋 **详细信息**: 显示文件名、路径、大小、哈希值、修改时间
- 🔄 **批量操作**: 支持全选、全不选、反选等批量操作
- 📤 **导出功能**: 可将重复文件列表导出为JSON或文本格式
- 🖱️ **右键菜单**: 支持打开文件、打开文件夹、复制路径等操作
- 📊 **实时统计**: 显示选中文件数量和将释放的空间大小
- ❌ **拖放支持**: 需要手动选择文件夹（无拖放功能）

**推荐使用完整版**，如果遇到依赖安装问题，可以使用简化版。

### 通用功能
- 🔍 **智能比较**: 使用文件哈希值（MD5/SHA1/SHA256）精确比较文件内容
- 🛡️ **安全模式**: 默认试运行模式，预览要删除的文件而不实际删除
- 📁 **递归扫描**: 自动扫描文件夹及其所有子文件夹
- 📊 **详细报告**: 显示扫描进度和删除结果统计
- ⚡ **内存优化**: 分块读取大文件，避免内存溢出

## 🚀 使用方法

### 方法一：GUI版本（推荐）

#### 两个GUI版本
1. **完整版** (`duplicate_finder_gui.py`) - 支持拖放功能，需要额外依赖
2. **简化版** (`duplicate_finder_gui_simple.py`) - 无需额外依赖，使用原生tkinter

#### 启动程序

**完整版（推荐）**
- 双击运行 `启动GUI版本.bat`
- 或直接运行: `python duplicate_finder_gui.py`
- **注意：** 完整版需要安装 `tkinterdnd2` 库来支持拖放功能。如果没有安装，请先运行 `安装依赖.bat` 或手动安装：
  ```bash
  pip install tkinterdnd2
  ```

**简化版（无需额外依赖）**
- 双击运行 `启动GUI版本（简化版）.bat`
- 或直接运行: `python duplicate_finder_gui_simple.py`
- **优点：** 无需安装额外依赖，使用Python自带的tkinter库

2. **操作步骤**
   - 选择源文件夹（参考文件夹，不会删除其中的文件）
   - 选择目标文件夹（要清理重复文件的文件夹）
   - 选择哈希算法（MD5/SHA1/SHA256）
   - 点击"开始扫描"按钮
   - 在结果列表中选择要删除的文件
   - 点击"删除选中文件"按钮

3. **界面功能**
   - **文件列表**: 显示所有重复文件的详细信息
   - **选择操作**: 点击复选框选择/取消选择文件
   - **批量操作**: 全选、全不选、反选按钮
   - **右键菜单**: 打开文件、打开文件夹、复制路径、查看属性
   - **导出功能**: 将重复文件列表保存为文件
   - **实时统计**: 显示选中文件数量和释放空间大小

### 方法二：命令行版本

1. **使用批处理脚本**
   - 双击运行 `清理重复文件.bat`
   - 按照提示输入源文件夹和目标文件夹路径

```batch
# 试运行模式（不实际删除）
清理重复文件.bat "C:\原始文件夹" "C:\备份文件夹"

# 实际删除重复文件
清理重复文件.bat "C:\原始文件夹" "C:\备份文件夹" --execute

# 使用SHA256算法并实际删除
清理重复文件.bat "C:\原始文件夹" "C:\备份文件夹" --execute --sha256
```

2. **直接使用Python脚本**

```bash
# 试运行模式
python compare_and_delete_duplicates.py "源文件夹路径" "目标文件夹路径"

# 实际删除重复文件
python compare_and_delete_duplicates.py "源文件夹路径" "目标文件夹路径" --execute

# 使用不同的哈希算法
python compare_and_delete_duplicates.py "源文件夹路径" "目标文件夹路径" --algorithm sha256 --execute
```

## 参数说明

- **源文件夹**: 参考文件夹，其中的文件不会被删除
- **目标文件夹**: 要清理重复文件的文件夹
- `--execute`: 实际执行删除操作（默认为试运行模式）
- `--algorithm`: 哈希算法选择（md5/sha1/sha256，默认md5）

## 使用场景

### 1. 清理备份文件夹
```
原始文件夹: D:\Photos\原始照片
备份文件夹: D:\Photos\备份照片
```
删除备份文件夹中与原始文件夹重复的照片。

### 2. 整理下载文件
```
主文件夹: D:\Documents\重要文档
下载文件夹: D:\Downloads
```
删除下载文件夹中已经存在于重要文档文件夹的文件。

### 3. 合并文件夹前的清理
```
文件夹A: D:\Music\收藏音乐
文件夹B: D:\Music\新下载音乐
```
在合并前删除新下载音乐中的重复文件。

## 安全提示

⚠️ **重要提醒**:
1. **首次使用请务必使用试运行模式**，确认要删除的文件列表
2. **建议在删除前备份重要数据**
3. 工具只会删除目标文件夹中的重复文件，不会修改源文件夹
4. 删除操作不可逆，请谨慎使用 `--execute` 参数

## 系统要求

- Windows 7/8/10/11
- Python 3.6 或更高版本
- 足够的磁盘空间用于临时存储哈希值

## 哈希算法选择

| 算法 | 速度 | 安全性 | 推荐场景 |
|------|------|--------|----------|
| MD5 | 最快 | 一般 | 日常文件去重 |
| SHA1 | 中等 | 较好 | 重要文件去重 |
| SHA256 | 较慢 | 最好 | 敏感文件去重 |

## 常见问题

**Q: 为什么有些文件无法删除？**
A: 可能是文件被占用、权限不足或文件损坏。请检查文件状态并以管理员身份运行。

**Q: 大文件夹扫描很慢怎么办？**
A: 这是正常现象，工具需要计算每个文件的哈希值。可以考虑使用MD5算法提高速度。

**Q: 如何恢复误删的文件？**
A: 可以尝试从回收站恢复，或使用数据恢复软件。建议删除前做好备份。

## 版本信息

- 版本: 1.0
- 作者: AI Assistant
- 更新日期: 2024年12月

---

如有问题或建议，请检查代码注释或修改脚本以适应您的特定需求。